# Описание API
Здесь описано всё АПИ, используемое в приложении, с описанием структур данных

## 1. Общее
### 1.1. Адрес сервера
Задаётся в src/config.ts

Выводится в консоль при запуске.

### 1.2. Как работать с сервером в терминале **Visual Studio Code**
* Первый запуск:
    1. `cd backend test-server`
    2. `npm install`
    3. `npm run dev`
* Выключение:
    1. Сочетание клавишь: `Ctrl` + `C`
    2. `Y`

| Команда | Описание |
| - | - |
| `npm run build` | создаёт билд сервера |
| `npm start` | запускает билд |
| `npm run dev` | создаёт билд, а потом запускает его |

### 1.3. Используемый протокол
API полностью реализовано на http(s). 

Формат возвращаемых значений `JSON`.

## 2. Структуры данных
### 2.1. Общий формат ответа
`T` - какие-то данные. В случае успешного ответа возвращается `result = 'ok'` и поле `data` с данными.

В случае ошибки возвращается `result = 'error'` и поле `error` с кодом и текстом ошибки
```
Answer<T>: {
    result: 'ok' | 'error';
    data?: T;
    error?: {
        code: number;
        text: string;
    };
}
```

### 2.2. Сообщение
```
Message {
    text: string;
    author: 'user' | 'bot'
}
```

### 2.3. Формат запроса
```
Request {
    history: Message[];
    message: Message;
}
```